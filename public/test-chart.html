<!DOCTYPE html>
<html>
<head>
    <title>Chart Test</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
</head>
<body>
    <div style="width: 800px; height: 400px; margin: 50px auto;">
        <h2>Chart Test</h2>
        <canvas id="testChart"></canvas>
    </div>

    <script>
        console.log('Chart.js loaded:', typeof Chart !== 'undefined');

        // Test data
        const testData = {
            labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May'],
            datasets: [{
                label: 'Sample Data',
                data: [12, 19, 3, 5, 2],
                borderColor: 'rgb(75, 192, 192)',
                backgroundColor: 'rgba(75, 192, 192, 0.2)',
                fill: false
            }]
        };

        const ctx = document.getElementById('testChart').getContext('2d');
        
        try {
            new Chart(ctx, {
                type: 'line',
                data: testData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false
                }
            });
            console.log('Chart created successfully');
        } catch (error) {
            console.error('Error creating chart:', error);
        }

        // Test API endpoint
        console.log('Testing API endpoint...');
        fetch('/manager/dashboard/chart-data?type=ticket_trends&period=week')
            .then(response => {
                console.log('API Response status:', response.status);
                return response.json();
            })
            .then(data => {
                console.log('API Response data:', data);
            })
            .catch(error => {
                console.error('API Error:', error);
            });
    </script>
</body>
</html>
